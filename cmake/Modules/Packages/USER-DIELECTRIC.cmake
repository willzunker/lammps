
set(DIELECTRIC_SOURCES_DIR ${LAMMPS_SOURCE_DIR}/USER-DIELECTRIC)

file(GLOB DIELECTRIC_SOURCES ${DIELECTRIC_SOURCES_DIR}/*.cpp)
file(GLOB DIELECTRIC_FIX_HEADERS ${DIELECTRIC_SOURCES_DIR}/fix*.h)
file(GLOB DIELECTRIC_PAIR_HEADERS ${DIELECTRIC_SOURCES_DIR}/pair*.h)
file(GLOB DIELECTRIC_KSPACE_HEADERS ${DIELECTRIC_SOURCES_DIR}/msm*.h ${DIELECTRIC_SOURCES_DIR}/pppm*.h)

if(NOT PKG_KSPACE)
     list(REMOVE_ITEM DIELECTRIC_SOURCES ${USER-DIELECTRIC_SOURCES_DIR}/msm_dielectric.cpp)
     list(REMOVE_ITEM DIELECTRIC_SOURCES ${USER-DIELECTRIC_SOURCES_DIR}/pppm_dielectric.cpp)
     list(REMOVE_ITEM DIELECTRIC_SOURCES ${USER-DIELECTRIC_SOURCES_DIR}/pair_coul_long_dielectric.cpp)
     list(REMOVE_ITEM DIELECTRIC_SOURCES ${USER-DIELECTRIC_SOURCES_DIR}/pair_lj_cut_coul_long_dielectric.cpp)
     list(REMOVE_ITEM DIELECTRIC_SOURCES ${USER-DIELECTRIC_SOURCES_DIR}/pair_lj_cut_coul_msm_dielectric.cpp)
     list(REMOVE_ITEM DIELECTRIC_SOURCES ${USER-DIELECTRIC_SOURCES_DIR}/pair_lj_long_coul_long_dielectric.cpp)
     list(REMOVE_ITEM DIELECTRIC_KSPACE_HEADERS ${USER-DIELECTRIC_SOURCES_DIR}/msm_dielectric.h)
     list(REMOVE_ITEM DIELECTRIC_KSPACE_HEADERS ${USER-DIELECTRIC_SOURCES_DIR}/pppm_dielectric.h)
     list(REMOVE_ITEM DIELECTRIC_PAIR_HEADERS ${USER-DIELECTRIC_SOURCES_DIR}/pair_coul_long_dielectric.h)
     list(REMOVE_ITEM DIELECTRIC_PAIR_HEADERS ${USER-DIELECTRIC_SOURCES_DIR}/pair_lj_cut_coul_long_dielectric.h)
     list(REMOVE_ITEM DIELECTRIC_PAIR_HEADERS ${USER-DIELECTRIC_SOURCES_DIR}/pair_lj_cut_coul_msm_dielectric.h)
     list(REMOVE_ITEM DIELECTRIC_PAIR_HEADERS ${USER-DIELECTRIC_SOURCES_DIR}/pair_lj_long_coul_long_dielectric.h)
endif()

set_property(GLOBAL PROPERTY "DIELECTRIC_SOURCES" ${DIELECTRIC_SOURCES})

foreach(MY_HEADER ${DIELECTRIC_FIX_HEADERS})
   AddStyleHeader(${MY_HEADER} FIX)
endforeach()
foreach(MY_HEADER ${DIELECTRIC_KSPACE_HEADERS})
   AddStyleHeader(${MY_HEADER} KSPACE)
endforeach()
foreach(MY_HEADER ${DIELECTRIC_PAIR_HEADERS})
   AddStyleHeader(${MY_HEADER} PAIR)
endforeach()

get_property(DIELECTRIC_SOURCES GLOBAL PROPERTY DIELECTRIC_SOURCES)
target_sources(lammps PRIVATE ${DIELECTRIC_SOURCES})
target_include_directories(lammps PRIVATE ${DIELECTRIC_SOURCES_DIR})
