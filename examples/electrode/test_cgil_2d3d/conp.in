variable tag getenv TAG
log log.lammps_${tag}
atom_style full
units real
bond_style harmonic
angle_style harmonic

# Select one file for kspace settings
if "${tag} == p3m" then "include p3m3dc.settings" &
elif "${tag} == ew3dc"  "include ew3dc.settings"  &
elif "${tag} == ew2d"   "include ew2d.settings"

boundary p p f
pair_style 	lj/cut/coul/long 16 16
processors * * 2

read_data "cap.data"
include "cgil.settings"

dump alldump all custom 1000 all_${tag}.lammpstrj id mol type x y z q
fix            fxnvt electrolyte nvt temp 500.0 500.0 100.
fix            fxupdate bot electrode/conp -1.0 1.979 couple top 1.0 write_inv fix_inv_${tag}.csv symm on
#fix conp bot conp 1 top 1.979 2 log_conp pppm
variable       q atom q
compute        qtop top reduce sum v_q
compute        qbot bot reduce sum v_q
compute        qall ele reduce sum v_q
compute        ctemp electrolyte temp

fix print all print 10 "$(step:%8.3g) $(c_qtop:%8.3e) $(c_qbot:%8.3e) $(c_ctemp:%8.3f) $(etotal:%12.3f)" file printout_${tag} screen no

thermo 10
thermo_style custom step c_ctemp epair etotal c_qtop c_qbot c_qall
run 500
